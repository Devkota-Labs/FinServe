(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[930],{8927:function(e,t,s){Promise.resolve().then(s.bind(s,8660))},1649:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]])},9397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8660:function(e,t,s){"use strict";s.d(t,{default:function(){return g}});var a=s(7437),l=s(2265),i=s(9820),n=s(279),c=s(2381),r=s(3340),d=s(1837),o=s(7690),u=s(5246),h=s(9403),x=s(6488),m=s(8390),p=s(7460),f=s(1649),y=s(9397),j=s(3247);function g(){let{toast:e}=(0,r.pm)(),{cities:t,loading:s,reload:g}=function(){let[e,t]=(0,l.useState)([]),[s,a]=(0,l.useState)(!0);function i(){a(!0),d.h.GetAllCity().then(e=>t(e.data||[])).finally(()=>a(!1))}return(0,l.useEffect)(i,[]),{cities:e,loading:s,reload:i}}(),[S,v]=(0,l.useState)(""),[N,b]=(0,l.useState)(1),A=(0,l.useMemo)(()=>t.filter(e=>e.name.toLowerCase().includes(S.toLowerCase())),[t,S]),C=A.slice((N-1)*8,8*N),T=Math.ceil(A.length/8),[w,k]=(0,l.useState)(!1),[E,M]=(0,l.useState)(""),[O,_]=(0,l.useState)(""),[z,I]=(0,l.useState)(""),[Z,D]=(0,l.useState)(!1),[P,G]=(0,l.useState)(""),[K,R]=(0,l.useState)("");function V(){M(""),_(""),I("")}async function F(e){e.preventDefault(),G(""),R(""),d.h.addCity({name:E,stateId:O}).then(()=>{R("City added successfully!"),g(),k(!1),V()}).catch(e=>{G(e.message||"Failed to add city")})}return(0,l.useEffect)(()=>{if(P||K){let e=setTimeout(()=>{G(""),R("")},3e3);return()=>clearTimeout(e)}},[P,K]),(0,a.jsxs)("div",{children:[(0,a.jsxs)(i.Zb,{className:"w-full shadow-md border rounded-xl",children:[(0,a.jsx)(i.Ol,{className:"flex justify-between items-center",children:(0,a.jsx)(i.ll,{className:"text-2xl",children:"City Management"})}),(0,a.jsxs)(i.aY,{children:[P&&(0,a.jsx)(u.Z,{type:"error",message:P}),K&&(0,a.jsx)(u.Z,{type:"success",message:K}),!w&&(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)(x.Z,{value:S,onChange:v,placeholder:"Search city..."}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(c.z,{onClick:()=>(0,o.p)(t,"Cities"),className:"bg-black hover:bg-gray-800 flex items-center gap-2",children:[(0,a.jsx)(f.Z,{size:18}),"Export Excel"]}),(0,a.jsxs)(c.z,{onClick:()=>k(!0),className:"bg-blue-600 text-white flex items-center gap-2",children:[(0,a.jsx)(y.Z,{size:18}),"Add City"]})]})]}),w&&(0,a.jsxs)("div",{className:"mb-8 bg-gray-50 p-6 rounded-lg border",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Add City"}),(0,a.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"City Name"}),(0,a.jsx)(n.I,{value:E,onChange:e=>M(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Select State"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.I,{value:z,readOnly:!0,className:"cursor-pointer pr-10",placeholder:"Select State",onClick:()=>D(!0)}),(0,a.jsx)(j.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 cursor-pointer hover:text-gray-800",size:18,onClick:()=>D(!0)})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)(c.z,{variant:"outline",onClick:()=>{V(),k(!1)},children:"Cancel"}),(0,a.jsx)(c.z,{type:"submit",className:"bg-blue-600 text-white",children:"Save City"})]})]})]}),!w&&(s?(0,a.jsx)(h.Z,{rows:5}):(0,a.jsx)("div",{className:"overflow-x-auto rounded-xl border shadow-sm bg-white",children:(0,a.jsxs)("table",{className:"min-w-[800px] w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"City"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:"Status"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),(0,a.jsxs)("tbody",{children:[0===C.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"py-6 text-center text-gray-500 italic",children:"No cities found"})}),C.map(e=>(0,a.jsxs)("tr",{className:"border-t hover:bg-gray-50 transition",children:[(0,a.jsx)("td",{className:"px-4 py-3",children:e.name}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.isActive?(0,a.jsx)("span",{className:"px-3 py-1 text-xs rounded-full bg-green-100 text-green-700",children:"Active"}):(0,a.jsx)("span",{className:"px-3 py-1 text-xs rounded-full bg-red-100 text-red-700",children:"Inactive"})}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right space-x-2",children:[(0,a.jsx)(c.z,{size:"sm",className:"bg-yellow-600 hover:bg-yellow-700",children:"Edit"}),(0,a.jsx)(c.z,{size:"sm",variant:e.isActive?"destructive":"default",className:e.isActive?"":"bg-green-600 hover:bg-green-700",children:e.isActive?"Deactivate":"Activate"})]})]},e.id))]})]})}))]}),!w&&(0,a.jsx)(m.Z,{page:N,totalPages:T,onPrev:()=>b(N-1),onNext:()=>b(N+1)})]}),(0,a.jsx)(p.Z,{open:Z,onClose:()=>D(!1),title:"Select State",fetchData:d.h.GetAllState,searchKey:"name",labelKey:"name",valueKey:"id",onSelect:e=>{_(e.id),I(e.id)}})]})}},3340:function(e,t,s){"use strict";s.d(t,{pm:function(){return h}});var a=s(2265);let l=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},c=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},r=[],d={toasts:[]};function o(e){d=c(d,e),r.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function h(){let[e,t]=a.useState(d);return a.useEffect(()=>(r.push(t),()=>{let e=r.indexOf(t);e>-1&&r.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[425,590,17,971,117,744],function(){return e(e.s=8927)}),_N_E=e.O()}]);